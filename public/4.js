webpackJsonp([4],{AIfT:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.invoice?n("div",[n("a",{on:{click:t.goBack}},[t._v("Về danh mục")]),t._v(" "),n("h3",{staticClass:"text-center"},[t._v(t._s(t.invoice.name))]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t._v("Thông tin chi tiết")]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("p",{staticClass:"card-text"},[n("b",[t._v("Dự án:")]),t._v(" "),n("a",[t._v(t._s(t.invoice.work.name))])]),t._v(" "),n("p",{staticClass:"card-text"},[n("b",[t._v("Nhà cung cấp:")]),t._v(" "),n("a",[t._v(t._s(t.invoice.provider.name))])])]),t._v(" "),n("div",{staticClass:"col"},[n("p",{staticClass:"card-text"},[n("b",[t._v("Ngày ký:")]),t._v(" "),n("a",[t._v(t._s(t.invoice.signed_at))])]),t._v(" "),n("p",{staticClass:"card-text"},[n("b",[t._v("% thanh toán:")]),t._v(" "),n("a",[t._v(t._s(t.percentComplete))])])]),t._v(" "),n("div",{staticClass:"col"},[n("p",{staticClass:"card-text"},[n("b",[t._v("Tổng số tiền:")]),t._v(" "),n("a",[t._v(t._s(t.comma(t.invoice.total))+" ")])]),t._v(" "),n("p",{staticClass:"card-text"},[n("b",[t._v("Đã thanh toán:")]),t._v(" "),n("a",[t._v(t._s(t.comma(t.invoice.payment_total))+" ")])])])])]),t._v(" "),n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t._v("Thanh toán")]),t._v(" "),n("table",{staticClass:"table payment-table"},[t._m(0,!1,!1),t._v(" "),n("tbody",t._l(t.invoice.payments,function(e,s){return n("tr",{key:e.id},[n("td",{staticClass:"number-col"},[t._v(t._s(s+1))]),t._v(" "),n("td",{staticClass:"name-col"},[t._v(t._s(e.name))]),t._v(" "),n("td",{staticClass:"date-col"},[t._v(t._s(e.pay_at))]),t._v(" "),n("td",{staticClass:"method-col"},[t._v(t._s(e.method))]),t._v(" "),n("td",{staticClass:"pay-col"},[t._v(t._s(t.comma(e.amount)))]),t._v(" "),n("td",{staticClass:"note-col"},[t._v(t._s(e.note))])])})),t._v(" "),n("tfoot",[n("tr",[n("td",{attrs:{colspan:"4"}},[t._v("Tổng cộng")]),t._v(" "),n("td",{attrs:{colspan:"2"}},[t._v(t._s(t.comma(t.invoice.payment_total)))])]),t._v(" "),n("tr",[n("td",{attrs:{colspan:"4"}},[t._v("Còn lại")]),t._v(" "),n("td",{attrs:{colspan:"2"}},[t._v(t._s(t.comma(t.invoice.total-t.invoice.payment_total)))])])])]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"form-group text-center"},[n("button",{staticClass:"btn btn-primary",on:{click:t.newPayment}},[t._v("Thêm thanh toán")])])]),t._v(" "),n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t._v("Vật tư")]),t._v(" "),n("table",{staticClass:"table receive-table scrollable-y"},[n("thead",{staticClass:"thead-light"},[n("tr",[n("th",{staticClass:"number-col"},[t._v("#")]),t._v(" "),n("th",{staticClass:"name-col"},[t._v("Tên")]),t._v(" "),n("th",{staticClass:"unit-col"},[t._v("Số lượng đặt hàng")]),t._v(" "),t._l(t.invoice.receives,function(e,s){return[n("th",{key:s,staticClass:"received-col"},[t._v("Nhận đợt "+t._s(s+1))])]}),t._v(" "),n("th",{staticClass:"total-received-col"},[t._v("Thực nhận")]),t._v(" "),n("th",{staticClass:"left-col"},[t._v("Còn lại")])],2)]),t._v(" "),n("tbody",t._l(t.invoice.trackers,function(e,s){return n("tr",{key:e.id},[n("td",{staticClass:"number-col"},[t._v(t._s(s+1))]),t._v(" "),n("td",{staticClass:"name-col"},[t._v(t._s(e.material.name))]),t._v(" "),n("td",{staticClass:"unit-col"},[t._v(t._s(e.unit))]),t._v(" "),t._l(t.invoice.receives,function(s){return[n("td",{key:s.id,staticClass:"received-col"},[t._v(t._s(t.getFromMatrix(s.id,e.id)))])]}),t._v(" "),n("td",{staticClass:"total-received-col"},[t._v(t._s(e.received_unit))]),t._v(" "),n("td",{staticClass:"left-col"},[t._v(t._s(e.unit-e.received_unit))])],2)}))]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"form-group text-center"},[n("button",{staticClass:"btn btn-primary",on:{click:t.newReceive}},[t._v("Nhận hàng")])])])])])])]):t._e()},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"thead-light"},[n("tr",[n("th",{staticClass:"number-col"},[t._v("#")]),t._v(" "),n("th",{staticClass:"name-col"},[t._v("Tên")]),t._v(" "),n("th",{staticClass:"date-col"},[t._v("Ngày")]),t._v(" "),n("th",{staticClass:"method-col"},[t._v("Hình thức")]),t._v(" "),n("th",{staticClass:"pay-col"},[t._v("Số tiền")]),t._v(" "),n("th",{staticClass:"note-col"},[t._v("Ghi chú")])])])}]}},NTFQ:function(t,e,n){var s=n("VU/8")(n("lWwC"),n("AIfT"),!1,function(t){n("jNdV")},null,null);t.exports=s.exports},"VU/8":function(t,e){t.exports=function(t,e,n,s,a,i){var c,r=t=t||{},o=typeof t.default;"object"!==o&&"function"!==o||(c=t,r=t.default);var l="function"==typeof r?r.options:r;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),a&&(l._scopeId=a);var v;if(i?(v=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=v):s&&(v=s),v){var d=l.functional,_=d?l.render:l.beforeCreate;d?(l._injectStyles=v,l.render=function(t,e){return v.call(e),_(t,e)}):l.beforeCreate=_?[].concat(_,v):[v]}return{esModule:c,exports:r,options:l}}},gJGn:function(t,e,n){(t.exports=n("FZ+f")(void 0)).push([t.i,"",""])},jNdV:function(t,e,n){var s=n("gJGn");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("rjj0")("6a5e65cb",s,!0)},lWwC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{invoice:null,received_list:[],total_paid:0,mew_payment:!1,payment_methods:[{label:"Chuyển khoản",id:"bank_transfer"},{label:"Tiền mặt",id:"cash"}]}},computed:{percentComplete:function(){return parseFloat(this.invoice.payment_total/this.invoice.total*100).toFixed(2)}},methods:{fetchData:function(){var t=this;axios.get(this.$store.state.apiBase+"/invoice/"+this.$route.params.id).then(function(e){t.invoice=e.data.data,t.received_list=e.data.meta.received_list,t.total_paid=t.invoice.payments.reduce(function(t){return t.amount})})},comma:function(t){return window.commafly(t)},getFromMatrix:function(t,e){var n=this.received_list.find(function(e){return e.receive_id===t}),s=n.trackers.find(function(t){return t.tracker_id===e});return s?s.unit:"-"},cancel:function(){this.$close(!1)},submit:function(){},goBack:function(){this.$router.push({name:"invoice.index"})},newReceive:function(){this.$router.push({name:"invoice.edit",query:{action:"new_receive",index:this.invoice.receives.length+1}})},newPayment:function(){this.$router.push({name:"invoice.edit",query:{action:"new_payment",index:this.invoice.payments.length+1}})}},created:function(){this.fetchData()}}},rjj0:function(t,e,n){function s(t){for(var e=0;e<t.length;e++){var n=t[e],s=l[n.id];if(s){s.refs++;for(c=0;c<s.parts.length;c++)s.parts[c](n.parts[c]);for(;c<n.parts.length;c++)s.parts.push(i(n.parts[c]));s.parts.length>n.parts.length&&(s.parts.length=n.parts.length)}else{for(var a=[],c=0;c<n.parts.length;c++)a.push(i(n.parts[c]));l[n.id]={id:n.id,refs:1,parts:a}}}}function a(){var t=document.createElement("style");return t.type="text/css",v.appendChild(t),t}function i(t){var e,n,s=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(s){if(u)return h;s.parentNode.removeChild(s)}if(p){var i=_++;s=d||(d=a()),e=c.bind(null,s,i,!1),n=c.bind(null,s,i,!0)}else s=a(),e=function(t,e){var n=e.css,s=e.media,a=e.sourceMap;s&&t.setAttribute("media",s);a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,s),n=function(){s.parentNode.removeChild(s)};return e(t),function(s){if(s){if(s.css===t.css&&s.media===t.media&&s.sourceMap===t.sourceMap)return;e(t=s)}else n()}}function c(t,e,n,s){var a=n?"":s.css;if(t.styleSheet)t.styleSheet.cssText=f(e,a);else{var i=document.createTextNode(a),c=t.childNodes;c[e]&&t.removeChild(c[e]),c.length?t.insertBefore(i,c[e]):t.appendChild(i)}}var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o=n("tTVk"),l={},v=r&&(document.head||document.getElementsByTagName("head")[0]),d=null,_=0,u=!1,h=function(){},p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){u=n;var a=o(t,e);return s(a),function(e){for(var n=[],i=0;i<a.length;i++){var c=a[i];(r=l[c.id]).refs--,n.push(r)}e?s(a=o(t,e)):a=[];for(i=0;i<n.length;i++){var r=n[i];if(0===r.refs){for(var v=0;v<r.parts.length;v++)r.parts[v]();delete l[r.id]}}}};var f=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},tTVk:function(t,e){t.exports=function(t,e){for(var n=[],s={},a=0;a<e.length;a++){var i=e[a],c=i[0],r={id:t+":"+a,css:i[1],media:i[2],sourceMap:i[3]};s[c]?s[c].parts.push(r):n.push(s[c]={id:c,parts:[r]})}return n}}});