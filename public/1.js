webpackJsonp([1],{"1BQ7":function(t,e,a){var n=a("wiSr");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("3463ae66",n,!0)},"3Oqi":function(t,e,a){(t.exports=a("FZ+f")(void 0)).push([t.i,"",""])},"6LiR":function(t,e,a){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=a("Tp4x"),s=(a.n(r),a("QP6q")),i=a.n(s);e.default={data:function(){return{rows:!1,categories:[],addCategoryTitle:"",looper:1,activeTab:"manual_import",copyFromExcel:""}},methods:{getData:function(){var t=this;axios.get(this.$store.state.apiBase+"/material").then(function(e){t.rows=e.data.data}).catch(function(t){})},toggleExpand:function(t){for(var e in this.flattened_rows)if(this.flattened_rows[e].id===t.id&&"category"===this.flattened_rows[e].type){if(this.flattened_rows[e].expanded=t.expanded,!0===t.expanded){var a;(a=this.flattened_rows).splice.apply(a,[e,0].concat(n(this.flattened_rows[e].children)))}!1===t.expanded&&this.flattened_rows.splice(e,this.flattened_rows[e].children.length);break}},newMaterials:function(t){var e=this;if(!t)return!1;this.addCategoryTitle=t.name,this.looper=1,this.copyFromExcel="",this.$swal({content:this.$refs.addMaterialElement,className:"big-swal"}).then(function(a){var n=[];if("manual_import"==e.activeTab&&document.querySelectorAll("div.form-row.new-material").forEach(function(t){var e=t.getElementsByTagName("input");n.push({name:e[0].value,per:e[1].value,currency:e[2].value,current_price:e[3].value,brand:e[4].value})}),"from_excel"==e.activeTab&&e.copyFromExcel){var r=e.copyFromExcel.split(String.fromCharCode(13));r.forEach(function(t,e){r[e]=t.split(String.fromCharCode(9))})}axios.post(e.$store.state.apiBase+"/material",{materials:n,category_id:t.id},{headers:{ContentType:"application/x-www-form-urlencoded"}}).then(function(t){200===t.status&&e.getData()}),e.looper=0,e.addCategoryTitle=""})},newCategory:function(t){var e=this;t||(t.name="gốc",t.id=0),this.looper=1,this.addCategoryTitle=t.name,this.$swal({content:this.$refs.addCategoryElement}).then(function(a){if(a){var n=[];document.querySelectorAll("input.new-category-name").forEach(function(t){n.push(t.value)}),n||axios.post(e.$store.state.apiBase+"/category",{categories:n,parent_id:t.id},{headers:{ContentType:"application/x-www-form-urlencoded"}}).then(function(t){200===t.status&&e.getData()})}e.looper=0,e.addCategoryTitle=""})}},computed:{flattenRows:function(){var t=[];if(this.rows){var e=!0,a=!1,r=void 0;try{for(var s,i=this.rows[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var o=s.value;t.push(o),o.children&&!0===o.expanded&&t.push.apply(t,n(o.children))}}catch(t){a=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw r}}}return t}},created:function(){this.getData()},components:{MaterialRow:i.a}}},QP6q:function(t,e,a){var n=a("VU/8")(a("SnmI"),a("jhhy"),!1,function(t){a("TCJz")},null,null);t.exports=n.exports},SnmI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{row:{type:Object,default:{}}},data:function(){return{expading_status:!1}},methods:{toggleExpand:function(){!0===this.row.expanded?this.$emit("expand",{id:this.row.id,expanded:!1}):this.row.children&&this.$emit("expand",{id:this.row.id,expanded:!0})},addChildCategory:function(t){this.$emit("new-category",{id:t.id,name:t.name})},addMaterials:function(t){this.$emit("new-materials",{id:t.id,name:t.name})},newMaterials:function(){}},computed:{is_category:function(){return"category"==this.row.type},classes:function(){return["depth-"+this.row.depth,{expanded:this.expading_status,expandable:null!==this.row.children,category:"category"===this.row.type}]}},mounted:function(){this.expading_status=this.row.expanded}}},TCJz:function(t,e,a){var n=a("3Oqi");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("5e1e5032",n,!0)},"VU/8":function(t,e){t.exports=function(t,e,a,n,r,s){var i,o=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(i=t,o=t.default);var l="function"==typeof o?o.options:o;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),a&&(l.functional=!0),r&&(l._scopeId=r);var d;if(s?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=d):n&&(d=n),d){var u=l.functional,p=u?l.render:l.beforeCreate;u?(l._injectStyles=d,l.render=function(t,e){return d.call(e),p(t,e)}):l.beforeCreate=p?[].concat(p,d):[d]}return{esModule:i,exports:o,options:l}}},Vfwg:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("table",{staticClass:" trackers-table material-trackers"},[t._m(0,!1,!1),t._v(" "),a("tbody",t._l(t.flattenRows,function(e,n){return a("material-row",{key:n,attrs:{row:e},on:{"new-category":t.newCategory,"new-materials":t.newMaterials,expand:t.toggleExpand}})}))]),t._v(" "),a("div",{staticClass:"controls text-center"},[a("button",{staticClass:"btn primary",on:{click:t.newCategory}},[t._v("Thêm danh mục gốc")])]),t._v(" "),a("div",{ref:"addCategoryElement",staticClass:"add-category show-on-swal"},[a("h3",{staticClass:"text-center"},[t._v("Thêm vào "),a("b",[t._v(t._s(t.addCategoryTitle))])]),t._v(" "),t._l(t.looper,function(t){return[a("div",{key:t,staticClass:"form-group"},[a("input",{staticClass:"form-control new-category-name",attrs:{type:"text",placeholder:"Nhập tên danh mục"}})])]}),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(e){t.looper++}}},[t._v("Thêm")])],2),t._v(" "),a("div",{ref:"addMaterialElement",staticClass:"add-materials show-on-swal"},[a("h3",{staticClass:"text-center"},[t._v("Thêm vật tư vào "),a("b",[t._v(t._s(t.addCategoryTitle))])]),t._v(" "),a("div",{staticClass:"nav nav-pills"},[a("a",{class:{"nav-link":!0,active:"manual_import"===t.activeTab},attrs:{href:"#"},on:{click:function(e){t.activeTab="manual_import"}}},[t._v("Nhập bằng tay")]),t._v(" "),a("a",{class:{"nav-link":!0,active:"from_excel"===t.activeTab},attrs:{href:"#"},on:{click:function(e){t.activeTab="from_excel"}}},[t._v("Copy từ Excel")])]),t._v(" "),a("div",{staticClass:"content"},["manual_import"===t.activeTab?a("div",{staticClass:"manual_import"},[t._l(t.looper,function(e){return[a("div",{key:e,staticClass:"form-row new-material"},[t._m(1,!0,!1),t._v(" "),t._m(2,!0,!1),t._v(" "),t._m(3,!0,!1),t._v(" "),t._m(4,!0,!1),t._v(" "),t._m(5,!0,!1)])]}),t._v(" "),a("br"),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(e){t.looper++}}},[t._v("Thêm")])],2):a("div",[t._m(6,!1,!1),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.copyFromExcel,expression:"copyFromExcel"}],staticClass:"form-control",attrs:{placeholder:"Copy từ Excel",cols:"100",rows:"10"},domProps:{value:t.copyFromExcel},on:{input:function(e){e.target.composing||(t.copyFromExcel=e.target.value)}}})])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-light"},[a("tr",[a("th",{staticClass:"col1"},[t._v("#")]),t._v(" "),a("th",{staticClass:"col2"},[t._v("Tên")]),t._v(" "),a("th",{staticClass:"col3"},[t._v("Đơn vị")]),t._v(" "),a("th",{staticClass:"col4"},[t._v("Loại tiền")]),t._v(" "),a("th",{staticClass:"col5"},[t._v("Giá hiện tại")]),t._v(" "),a("th",{staticClass:"col6"},[t._v("Hãng")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-7"},[e("input",{staticClass:"form-control new-material-name",attrs:{type:"text",placeholder:"Tên vật tư"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[e("input",{staticClass:"form-control new-material-unit",attrs:{type:"text",placeholder:"Đơn vị"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[e("input",{staticClass:"form-control new-material-currency",attrs:{type:"text",placeholder:"Loại tiền"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[e("input",{staticClass:"form-control new-material-price",attrs:{type:"text",placeholder:"Giá tiền"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[e("input",{staticClass:"form-control new-material-brand",attrs:{type:"text",placeholder:"Hãng"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table"},[a("thead",{staticClass:"thead-light"},[a("tr",[a("th",{staticClass:"col2"},[t._v("Tên")]),t._v(" "),a("th",{staticClass:"col3"},[t._v("Đơn vị")]),t._v(" "),a("th",{staticClass:"col4"},[t._v("Loại tiền")]),t._v(" "),a("th",{staticClass:"col5"},[t._v("Giá hiện tại")]),t._v(" "),a("th",{staticClass:"col6"},[t._v("Hãng")])])])])}]}},jhhy:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return"category"===t.row.type?a("tr",{class:t.classes},[a("td",{attrs:{colspan:"4"}},[t._v(t._s(t.row.name)+" "),t.row.depth>0&&t.row.children?a("span",[t._v("( "+t._s(t.row.children.length)+" )")]):t._e()]),t._v(" "),a("td",{staticClass:"inline-control",attrs:{colspan:"2"}},[0===t.row.depth?a("span",{on:{click:function(e){e.stopPropagation(),t.addChildCategory(t.row)}}},[t._v("Thêm danh mục")]):t._e(),t._v(" "),1===t.row.depth?a("span",{on:{click:function(e){e.stopPropagation(),t.addMaterials(t.row)}}},[t._v("Thêm vật tư")]):t._e()])]):a("tr",[a("td",{staticClass:"col1"},[t._v(t._s(t.row.id))]),t._v(" "),a("td",{staticClass:"col2"},[t._v(t._s(t.row.name))]),t._v(" "),a("td",{staticClass:"col3"},[t._v(t._s(t.row.per))]),t._v(" "),a("td",{staticClass:"col4"},[t._v("vnd")]),t._v(" "),a("td",{staticClass:"col5"},[t._v("0")]),t._v(" "),a("td",{staticClass:"col6"},[t._v(t._s(t.row.brand))])])},staticRenderFns:[]}},rjj0:function(t,e,a){function n(t){for(var e=0;e<t.length;e++){var a=t[e],n=l[a.id];if(n){n.refs++;for(i=0;i<n.parts.length;i++)n.parts[i](a.parts[i]);for(;i<a.parts.length;i++)n.parts.push(s(a.parts[i]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{for(var r=[],i=0;i<a.parts.length;i++)r.push(s(a.parts[i]));l[a.id]={id:a.id,refs:1,parts:r}}}}function r(){var t=document.createElement("style");return t.type="text/css",d.appendChild(t),t}function s(t){var e,a,n=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(n){if(f)return h;n.parentNode.removeChild(n)}if(v){var s=p++;n=u||(u=r()),e=i.bind(null,n,s,!1),a=i.bind(null,n,s,!0)}else n=r(),e=function(t,e){var a=e.css,n=e.media,r=e.sourceMap;n&&t.setAttribute("media",n);r&&(a+="\n/*# sourceURL="+r.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");if(t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}.bind(null,n),a=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else a()}}function i(t,e,a,n){var r=a?"":n.css;if(t.styleSheet)t.styleSheet.cssText=m(e,r);else{var s=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(s,i[e]):t.appendChild(s)}}var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=a("tTVk"),l={},d=o&&(document.head||document.getElementsByTagName("head")[0]),u=null,p=0,f=!1,h=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,a){f=a;var r=c(t,e);return n(r),function(e){for(var a=[],s=0;s<r.length;s++){var i=r[s];(o=l[i.id]).refs--,a.push(o)}e?n(r=c(t,e)):r=[];for(s=0;s<a.length;s++){var o=a[s];if(0===o.refs){for(var d=0;d<o.parts.length;d++)o.parts[d]();delete l[o.id]}}}};var m=function(){var t=[];return function(e,a){return t[e]=a,t.filter(Boolean).join("\n")}}()},tTVk:function(t,e){t.exports=function(t,e){for(var a=[],n={},r=0;r<e.length;r++){var s=e[r],i=s[0],o={id:t+":"+r,css:s[1],media:s[2],sourceMap:s[3]};n[i]?n[i].parts.push(o):a.push(n[i]={id:i,parts:[o]})}return a}},ugfw:function(t,e,a){var n=a("VU/8")(a("6LiR"),a("Vfwg"),!1,function(t){a("1BQ7")},null,null);t.exports=n.exports},wiSr:function(t,e,a){(t.exports=a("FZ+f")(void 0)).push([t.i,"",""])}});