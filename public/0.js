webpackJsonp([0],{"0Nbk":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{work_name:"",work_client:"",work_description:""}},methods:{cancel:function(){this.$close(!1)},submit:function(){var t=this;axios.post(this.$store.state.apiBase+"/work",{name:this.work_name,description:this.work_description,client:this.work_client}).then(function(e){200===e.status&&t.$swal("Hoàn tất","Cập nhật thành công","success").then(function(e){t.$close(!0)})})}}}},"1rLP":function(t,e,n){"use strict";function s(){return!!(document.fullscreen||document.mozFullScreen||document.fullscreenElement||document.msFullscreenElement||document.webkitIsFullScreen)}Object.defineProperty(e,"__esModule",{value:!0});e.default={props:{background:{type:String,default:"#333"},fullscreenClass:{type:String,default:"fullscreen"},fullscreen:{type:Boolean,default:!1}},data:function(){return{supportFullScreen:!1,isFullscreen:!1}},computed:{wrapperStyle:function(){return{background:this.background,"overflow-y":"auto",width:"100%",height:"100%"}}},methods:{toggle:function(t){void 0===t?s()?this.exit():this.enter():t?this.enter():this.exit()},enter:function(){this.supportFullScreen&&(function(t){document.addEventListener("fullscreenchange",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("MSFullscreenChange",t),document.addEventListener("webkitfullscreenchange",t)}(this.fullScreenCallback),function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}(this.$el))},exit:function(){this.supportFullScreen&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())},getState:function(){return s()},shadeClick:function(t){t.target===this.$el&&this.exit()},fullScreenCallback:function(){this.isFullscreen=s(),this.isFullscreen||function(t){document.removeEventListener("fullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),document.removeEventListener("MSFullscreenChange",t),document.removeEventListener("webkitfullscreenchange",t)}(this.fullScreenCallback),this.$emit("change",this.isFullscreen),this.$emit("update:fullscreen",this.isFullscreen)}},watch:{fullscreen:function(t){t!==s()&&(t?this.enter():this.exit())}},created:function(){this.supportFullScreen=function(){var t=document.documentElement;return"requestFullscreen"in t||"mozRequestFullScreen"in t&&document.mozFullScreenEnabled||"msRequestFullscreen"in t&&document.msFullscreenEnabled||"webkitRequestFullScreen"in t}()}}},"5B1q":function(t,e,n){(t.exports=n("FZ+f")(void 0)).push([t.i,"",""])},"5fXN":function(t,e,n){var s=n("VU/8")(n("0Nbk"),n("UbwO"),!1,function(t){n("nOqX")},null,null);t.exports=s.exports},"8aj/":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"works"}},[t.works?n("div",{staticClass:"card-deck works"},[t._l(t.works,function(e){return n("div",{key:e.id,staticClass:"work"},[n("div",{staticClass:"card"},[n("img",{staticClass:"card-img-top",attrs:{src:e.image,alt:"Card image cap"}}),t._v(" "),n("div",{staticClass:"card-body"},[n("h4",{staticClass:"card-title"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"card-text"},[t._v(t._s(e.description))]),t._v(" "),n("p",{staticClass:"card-text"},[t._v("Chủ đầu tư: "),n("small",{staticClass:"text-muted"},[t._v(t._s(e.client))])]),t._v(" "),n("button",{staticClass:"float-right btn btn-primary",on:{click:function(n){t.viewReports(e.id)}}},[t._v("Xem báo cáo")]),t._v(" "),n("button",{staticClass:"float-right btn",on:{click:function(n){e.showDetail=!e.showDetail,t.current_work_id=e.id}}},[t._v("Chi tiết")])])]),t._v(" "),e.showDetail?n("div",{staticClass:"work-detail"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("p",{staticClass:"card-text"},[n("b",[t._v("Khởi công: ")]),t._v(t._s(e.started_at))]),t._v(" "),n("p",{staticClass:"card-text"},[n("b",[t._v("Tổng giá trị BOQ: ")]),t._v(t._s(t.comma(e.boq_sum)))])]),t._v(" "),n("div",{staticClass:"col"},[n("p",{staticClass:"card-text"},[n("b",[t._v("Số đơn hàng: ")]),t._v(t._s(e.invoice_count))]),t._v(" "),n("p",{staticClass:"card-text"},[n("b",[t._v("Giá trị đơn hàng: ")]),t._v(t._s(t.comma(e.total_sum)))])]),t._v(" "),n("div",{staticClass:"col"},[t._m(0,!0,!1),t._v(" "),n("p",{staticClass:"card-text"},[n("b",[t._v("Giá trị thanh toán: ")]),t._v(t._s(t.comma(e.paid_sum)))])])])]),t._v(" "),n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("p",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.newInvoice()}}},[t._v("Tạo đơn hàng")])])])])])])]):t._e()])}),t._v(" "),n("div",{staticClass:"card work",on:{click:t.newWork}},[t._m(1,!1,!1)])],2):t._e(),t._v(" "),n("fullscreen",{ref:"fullscreen",attrs:{fullscreen:t.fullscreen,background:"#ffffff"},on:{"update:fullscreen":function(e){t.fullscreen=e}}},[t.fullscreen?n("work-report"):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"card-text"},[e("b",[this._v("Số người công tác: ")]),this._v("Chưa có thông tin")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-body"},[e("h4",{staticClass:"card-title text-center"},[this._v("Thêm công trường")]),this._v(" "),e("p",{staticClass:"card-text text-center"},[this._v("\n                    Tạo công trường mới\n                ")])])}]}},"8wNF":function(t,e,n){var s=n("VU/8")(n("Rwmx"),n("8aj/"),!1,function(t){n("LDSV")},null,null);t.exports=s.exports},"96g2":function(t,e,n){"use strict";function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=n("Tp4x"),r=n.n(i);e.default={props:["work_id"],data:function(){return{new_list:[],new_materials_in_category:[],invoice_type_options:[{id:"invoice",label:"Hoá đơn mua hàng"},{id:"contract",label:"Hợp đồng nguyên tắc"}],invoice_type:"invoice",provider_id:null,providers:[],signed_at:"",contract_number:"",new_provider:{name:"",tax_number:"",description:"",address:""},selected_materials:[]}},computed:{nested_list:function(){var t=[];return this.list.forEach(function(e){"category"===e.type&&t.push({name:e.name,id:e.id,children:[]}),"material"===e.type&&e.name&&t[t.length-1].children.push(e)}),t},work:function(){return this.$store.state.currentWork},list:function(){for(var t=this,e=1,n=[],i=this.work.flatten_list.filter(function(e){return-1!==t.selected_materials.indexOf(e.id)&&"material"===e.type}),r=[].concat(s(new Set(i.map(function(t){return t.category_id})))),a=function(a){var o=t.work.flatten_list.filter(function(t){return"category"===t.type&&t.id===r[a]})[0];n.push({type:"category",name:o.label,uid:t.uid(),keyid:e++,is_new:!1,id:o.id});var c=i.filter(function(t){return"material"===t.type&&t.category_id===r[a]}).map(function(n){return{name:n.name,type:"material",currency:n.currency,per:n.per,uid:t.uid(),keyid:e++,boq_unit:n.boq_unit,boq_price:n.boq_price,brand:n.brand,is_new:!1,unit:0,price:0,id:n.id}}),l=t.new_materials_in_category.filter(function(t){return t.category_id===r[a]}).map(function(n){return{name:"",type:"material",currency:"vnđ",per:"",uid:t.uid(),keyid:e++,boq_unit:0,boq_price:0,is_new:!0,brand:"",unit:0,price:0}});n.push.apply(n,s(c).concat(s(l)))},o=0;o<r.length;o++)a(o);for(o=0;o<this.new_list.length;o++)this.new_list[o].keyid=e++;return n.concat(this.new_list)}},methods:{addCategory:function(){this.new_list.push({type:"category",name:"",uid:this.uid(),keyid:this.list.length,is_new:!0,id:0})},addMaterial:function(t){var e=t+1,n=this.list.length;if(n>1)for(var s=t+1;s<n;s++)if("category"===this.list[s].type||s===n-1){e=s+1;break}this.new_list.splice(e,0,{name:"",type:"material",currency:"vnđ",uid:this.uid(),keyid:"",boq_unit:0,boq_price:0,is_new:!0,unit:0,price:0,brand:""})},addMaterialTo:function(t,e){0===t?this.addMaterial(e):this.new_materials_in_category.push({category_id:t})},uid:function(){return Math.random().toString(36).substring(2)+(new Date).getTime().toString(36).substring(10)},fetchProviders:function(t){t(null,[{id:0,label:"Tạo nhà cung cấp mới"}].concat(this.providers.map(function(t){return{id:t.id,label:t.name}})))},cancel:function(){this.$close(!1)},submit:function(){var t=this;axios.patch(this.$store.state.apiBase+"/work/"+this.work.id,{action:"new_"+this.invoice_type,provider_id:this.provider_id,new_provider:this.new_provider,list:this.nested_list,signed_at:this.signed_at,contract_number:this.contract_number}).then(function(e){200===e.status&&t.$swal("Hoàn tất","Cập nhật thành công","success").then(function(e){t.$close(!0)})})}},mounted:function(){var t=this;axios.get(this.$store.state.apiBase+"/provider").then(function(e){t.providers=e.data})},directives:{focus:{inserted:function(t){t.focus()}}},components:{Treeselect:r.a}}},BmYa:function(t,e,n){var s=n("5B1q");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("rjj0")("77b601e6",s,!0)},C2ZH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{detailedWork:[],material:!1}},computed:{work:function(){return this.$store.state.currentWork}},methods:{showMaterialDetail:function(t){var e=this;axios.get(this.$store.state.apiBase+"/material/"+t).then(function(t){e.material=t.data.data})},commafly:function(t){return window.commafly(t)}}}},ETc7:function(t,e,n){var s=n("VU/8")(n("1rLP"),n("WwWP"),!1,null,null,null);t.exports=s.exports},LDSV:function(t,e,n){var s=n("ttiJ");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("rjj0")("4d3c35c9",s,!0)},OkQN:function(t,e,n){var s=n("rJDO");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("rjj0")("866ed824",s,!0)},Rwmx:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("ETc7"),i=n.n(s),r=n("IDaW"),a=n("5fXN"),o=n.n(a),c=n("oGWk"),l=n.n(c),u=n("gYPJ"),d=n.n(u);e.default={data:function(){return{works:[],report:!1,fullscreen:!1,current_work_id:!1,action:!1}},watch:{current_work_id:function(){var t=this;this.works.forEach(function(e){if(e.id===t.current_work_id)return t.$store.commit("SET_CURRENT_WORK",e),!1})}},computed:{},methods:{fetchData:function(){var t=this;this.current_work_id=!1,axios.get(this.$store.state.apiBase+"/work").then(function(e){t.works=e.data.data.map(function(t){var e=[],n=0;return t.nested_categories.forEach(function(t){var s=t.children.map(function(t,e){return n+=parseFloat(t.boq_total),Object.assign({},t,{index:++e})});e.push.apply(e,[t].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(s)))}),Object.assign({},t,{flatten_list:e,boq_sum:n})})}).catch(function(t){})},viewReports:function(t){this.current_work_id=t,this.$refs.fullscreen.enter()},comma:function(t){return window.commafly(t)},newWork:function(){var t=this;Promise.resolve(r.a.makeDialog(o.a)()).then(function(e){e&&t.fetchData()})},newInvoice:function(){var t=this;Promise.resolve(r.a.makeDialog(l.a)()).then(function(e){e&&t.fetchData()})}},mounted:function(){this.fetchData()},components:{fullscreen:i.a,"work-report":d.a}}},Tvi1:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fullscreen-container work-report"},[n("h3",{staticClass:"text-center"},[t._v("Báo cáo vật tư công trình "+t._s(t.work.name))]),t._v(" "),n("div",{staticClass:"report"},[n("div",{staticClass:"top"},[n("table",{staticClass:" trackers-table report-table table"},[t._m(0,!1,!1),t._v(" "),n("tbody",[t._l(t.work.flatten_list,function(e,s){return["category"===e.type?n("tr",{key:s,class:{category:"category"===e.type}},[n("td"),t._v(" "),n("td",{attrs:{colspan:"12"}},[t._v(t._s(e.label)+" "),e.depth>0&&e.children?n("span",[t._v("( "+t._s(e.children.length)+" )")]):t._e()])]):n("tr",{key:s,class:{material:"material"===e.type},on:{click:function(n){t.showMaterialDetail(e.id)}}},[n("td",{staticClass:"index-col"},[t._v(t._s(e.index))]),t._v(" "),n("td",{},[t._v(t._s(e.name))]),t._v(" "),n("td",{staticClass:"per-col child-col"},[t._v(t._s(e.per))]),t._v(" "),n("td",{staticClass:"currency-col child-col"},[t._v(t._s(e.currency))]),t._v(" "),n("td",{staticClass:"invoice_count-col child-col"},[t._v(t._s(e.invoice_count))]),t._v(" "),n("td",{staticClass:"total_unit-col child-col"},[t._v(t._s(e.total_unit))]),t._v(" "),n("td",{staticClass:"total_price-col child-col"},[t._v(t._s(t.commafly(e.total_price)))]),t._v(" "),n("td",{staticClass:"boq_unit-col child-col"},[t._v(t._s(e.boq_unit))]),t._v(" "),n("td",{staticClass:"boq_unit-col child-col"},[t._v(t._s(t.commafly(e.boq_price)))]),t._v(" "),n("td",{staticClass:"boq_total-col child-col"},[t._v(t._s(t.commafly(e.boq_price*e.boq_unit)))]),t._v(" "),n("td",{staticClass:"real_unit-col child-col"},[t._v(t._s(e.boq_unit-e.total_unit))]),t._v(" "),n("td",{staticClass:"real_count-col child-col"},[t._v(t._s(t.commafly(e.boq_price*e.boq_unit-e.total_price)))]),t._v(" "),n("td",{staticClass:"percent-col child-col"},[t._v(t._s(parseFloat((e.boq_price*e.boq_unit-e.total_price)/(e.boq_price*e.boq_unit)*100).toFixed(2))+" %")])])]})],2),t._v(" "),n("tfoot",[n("tr",[n("td",{attrs:{colspan:"4"}},[t._v("Tổng cộng")]),t._v(" "),n("td",{attrs:{colspan:"1"}},[t._v(t._s(t.work.invoice_count))])])])])]),t._v(" "),t.material?n("div",{staticClass:"bottom"},[n("br"),t._v(" "),n("h4",{staticClass:"text-center"},[t._v(t._s(t.material.name))]),t._v(" "),n("table",{staticClass:"table material-detail"},[t._m(1,!1,!1),t._v(" "),n("tbody",{staticClass:"text-center"},t._l(t.material.invoices,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(s))]),t._v(" "),n("td",[t._v(t._s(e.signed_at))]),t._v(" "),n("td",[t._v(t._s(e.recieved_at))]),t._v(" "),n("td",[t._v(t._s(e.provider_name))]),t._v(" "),n("td",[t._v(t._s(e.unit))]),t._v(" "),n("td",[t._v(t._s(e.recieved_unit))]),t._v(" "),n("td",[t._v(t._s(e.unit-e.recieved_unit))]),t._v(" "),n("td",[t._v(t._s(t.commafly(e.cost)))]),t._v(" "),n("td",[t._v(t._s(t.commafly(e.cost*e.unit)))]),t._v(" "),n("td",[t._v(t._s(t.commafly(e.cost*e.recieved_unit))+"\n                        ")]),n("td",[t._v(t._s(e.notes))])])})),t._v(" "),n("tfoot",[n("tr",[n("td",{staticClass:"tfoot-title",attrs:{colspan:"4"}},[t._v("Tổng cộng")]),t._v(" "),n("td",{staticClass:"tfoot-content",attrs:{colspan:"3"}},[t._v(t._s(t.material.total_unit))]),t._v(" "),n("td",{staticClass:"tfoot-content",attrs:{colspan:"3"}},[t._v(t._s(t.commafly(t.material.total_price)))]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticClass:"tfoot-title",attrs:{colspan:"4"}},[t._v("BOQ")]),t._v(" "),n("td",{staticClass:"tfoot-content",attrs:{colspan:"3"}},[t._v(t._s(t.material.boq_unit))]),t._v(" "),n("td",{staticClass:"tfoot-content",attrs:{colspan:"3"}},[t._v(t._s(t.commafly(t.material.boq_price*t.material.boq_unit)))]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticClass:"tfoot-title",attrs:{colspan:"4"}},[t._v("Chênh lệch")]),t._v(" "),n("td",{staticClass:"tfoot-content",attrs:{colspan:"3"}},[t._v(t._s(t.material.boq_unit-t.material.total_unit))]),t._v(" "),n("td",{staticClass:"tfoot-content",attrs:{colspan:"3"}},[t._v(t._s(t.commafly(t.material.boq_price*t.material.boq_unit-t.material.total_price)))]),t._v(" "),n("td")])])])]):t._e()])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"thead-light"},[n("tr",[n("th",{staticClass:"index-col",attrs:{rowspan:"2"}},[t._v("#")]),t._v(" "),n("th",{staticClass:"name-col",attrs:{rowspan:"2"}},[t._v("Tên")]),t._v(" "),n("th",{staticClass:"per-col",attrs:{rowspan:"2"}},[t._v("Đơn vị")]),t._v(" "),n("th",{staticClass:"currency-col",attrs:{rowspan:"2"}},[t._v("Loại tiền")]),t._v(" "),n("th",{staticClass:"invoice_count-col child-col"},[t._v("Tổng đơn hàng")]),t._v(" "),n("th",{staticClass:"total_unit-col child-col"},[t._v("Số lượng đặt hàng")]),t._v(" "),n("th",{staticClass:"total_price-col child-col"},[t._v("Giá trị đặt hàng")]),t._v(" "),n("th",{staticClass:"boq_unit-col child-col"},[t._v("Số lượng BOQ")]),t._v(" "),n("th",{staticClass:"boq_unit-col child-col"},[t._v("Đơn giá BOQ")]),t._v(" "),n("th",{staticClass:"boq_total-col child-col"},[t._v("Giá trị BOQ")]),t._v(" "),n("th",{staticClass:"real_unit-col child-col"},[t._v("Số lượng chưa thực hiện")]),t._v(" "),n("th",{staticClass:"real_count-col child-col"},[t._v("Giá trị chưa thực hiện")]),t._v(" "),n("th",{staticClass:"percent-col child-col"},[t._v("% chưa thực hiện")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"thead-light text-center"},[n("tr",[n("th",{attrs:{rowspan:"2"}},[t._v("STT")]),t._v(" "),n("th",{attrs:{rowspan:"2"}},[t._v("Ngày lập đơn")]),t._v(" "),n("th",{attrs:{rowspan:"2"}},[t._v("Ngày giao hàng")]),t._v(" "),n("th",{attrs:{rowspan:"2"}},[t._v("Nhà cung cấp")]),t._v(" "),n("th",{attrs:{colspan:"3"}},[t._v("Số lượng")]),t._v(" "),n("th",{attrs:{colspan:"3"}},[t._v("Giá trị")]),t._v(" "),n("th",{attrs:{rowspan:"2"}},[t._v("Ghi chú")])]),t._v(" "),n("tr",[n("th",[t._v("Số lượng đặt")]),t._v(" "),n("th",[t._v("Số lượng đã nhận")]),t._v(" "),n("th",[t._v("Số lượng còn lại")]),t._v(" "),n("th",[t._v("Đơn giá")]),t._v(" "),n("th",[t._v("Giá trị đặt hàng")]),t._v(" "),n("th",[t._v("Giá trị đã nhận")])])])}]}},UbwO:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dialog-wrapper",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.cancel(e)}}},[n("div",{staticClass:"dialog-content"},[n("div",{staticClass:"text-left"},[n("h3",{staticClass:"text-center"},[t._v("Tạo công trình mới")]),t._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-form-label",attrs:{for:"work_name"}},[t._v("Tên công trình")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.work_name,expression:"work_name"}],staticClass:"form-control",attrs:{type:"text",id:"work_name",placeholder:""},domProps:{value:t.work_name},on:{input:function(e){e.target.composing||(t.work_name=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-form-label",attrs:{for:"work_client"}},[t._v("Chủ đầu tư")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.work_client,expression:"work_client"}],staticClass:"form-control",attrs:{type:"text",id:"work_client",placeholder:""},domProps:{value:t.work_client},on:{input:function(e){e.target.composing||(t.work_client=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-form-label",attrs:{for:"work_description"}},[t._v("Mô tả")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.work_description,expression:"work_description"}],staticClass:"form-control",attrs:{id:"work_description",placeholder:""},domProps:{value:t.work_description},on:{input:function(e){e.target.composing||(t.work_description=e.target.value)}}})])])])])]),t._v(" "),n("div",{staticClass:"form-group text-center"},[n("button",{staticClass:"btn btn-primary",on:{click:t.submit}},[t._v("Lưu")]),t._v(" "),n("button",{staticClass:"btn",on:{click:t.cancel}},[t._v("Bỏ qua")])])])])},staticRenderFns:[]}},"VU/8":function(t,e){t.exports=function(t,e,n,s,i,r){var a,o=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(a=t,o=t.default);var l="function"==typeof o?o.options:o;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=i);var u;if(r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=u):s&&(u=s),u){var d=l.functional,_=d?l.render:l.beforeCreate;d?(l._injectStyles=u,l.render=function(t,e){return u.call(e),_(t,e)}):l.beforeCreate=_?[].concat(_,u):[u]}return{esModule:a,exports:o,options:l}}},W7QA:function(t,e,n){(t.exports=n("FZ+f")(void 0)).push([t.i,"",""])},WwWP:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.isFullscreen?[t.fullscreenClass]:[],style:t.isFullscreen?[t.wrapperStyle]:[],on:{click:function(e){t.shadeClick(e)}}},[t._t("default")],2)},staticRenderFns:[]}},gYPJ:function(t,e,n){var s=n("VU/8")(n("C2ZH"),n("Tvi1"),!1,function(t){n("OkQN")},null,null);t.exports=s.exports},nOqX:function(t,e,n){var s=n("W7QA");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("rjj0")("005b7956",s,!0)},oGWk:function(t,e,n){var s=n("VU/8")(n("96g2"),n("vWBm"),!1,function(t){n("BmYa")},null,null);t.exports=s.exports},rJDO:function(t,e,n){(t.exports=n("FZ+f")(void 0)).push([t.i,"",""])},rjj0:function(t,e,n){function s(t){for(var e=0;e<t.length;e++){var n=t[e],s=l[n.id];if(s){s.refs++;for(a=0;a<s.parts.length;a++)s.parts[a](n.parts[a]);for(;a<n.parts.length;a++)s.parts.push(r(n.parts[a]));s.parts.length>n.parts.length&&(s.parts.length=n.parts.length)}else{for(var i=[],a=0;a<n.parts.length;a++)i.push(r(n.parts[a]));l[n.id]={id:n.id,refs:1,parts:i}}}}function i(){var t=document.createElement("style");return t.type="text/css",u.appendChild(t),t}function r(t){var e,n,s=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(s){if(v)return p;s.parentNode.removeChild(s)}if(m){var r=_++;s=d||(d=i()),e=a.bind(null,s,r,!1),n=a.bind(null,s,r,!0)}else s=i(),e=function(t,e){var n=e.css,s=e.media,i=e.sourceMap;s&&t.setAttribute("media",s);i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,s),n=function(){s.parentNode.removeChild(s)};return e(t),function(s){if(s){if(s.css===t.css&&s.media===t.media&&s.sourceMap===t.sourceMap)return;e(t=s)}else n()}}function a(t,e,n,s){var i=n?"":s.css;if(t.styleSheet)t.styleSheet.cssText=f(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n("tTVk"),l={},u=o&&(document.head||document.getElementsByTagName("head")[0]),d=null,_=0,v=!1,p=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){v=n;var i=c(t,e);return s(i),function(e){for(var n=[],r=0;r<i.length;r++){var a=i[r];(o=l[a.id]).refs--,n.push(o)}e?s(i=c(t,e)):i=[];for(r=0;r<n.length;r++){var o=n[r];if(0===o.refs){for(var u=0;u<o.parts.length;u++)o.parts[u]();delete l[o.id]}}}};var f=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},tTVk:function(t,e){t.exports=function(t,e){for(var n=[],s={},i=0;i<e.length;i++){var r=e[i],a=r[0],o={id:t+":"+i,css:r[1],media:r[2],sourceMap:r[3]};s[a]?s[a].parts.push(o):n.push(s[a]={id:a,parts:[o]})}return n}},ttiJ:function(t,e,n){(t.exports=n("FZ+f")(void 0)).push([t.i,"",""])},vWBm:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dialog-wrapper",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.cancel(e)}}},[n("div",{staticClass:"dialog-content big"},[n("h3",[t._v("Tạo đơn hàng mới")]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("h5",{staticClass:"text-center"},[t._v("Thông tin chung")]),t._v(" "),n("div",{staticClass:"form-group"},[n("treeselect",{attrs:{options:t.invoice_type_options},model:{value:t.invoice_type,callback:function(e){t.invoice_type=e},expression:"invoice_type"}})],1),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("label",{attrs:{for:"signed_at"}},[t._v("Ngày ký")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.signed_at,expression:"signed_at"}],staticClass:"form-control",attrs:{type:"date",id:"signed_at"},domProps:{value:t.signed_at},on:{input:function(e){e.target.composing||(t.signed_at=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"col"},[n("label",{attrs:{for:"contract_number"}},[t._v("Số hợp đồng")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.contract_number,expression:"contract_number"}],staticClass:"form-control",attrs:{type:"text",id:"contract_number"},domProps:{value:t.contract_number},on:{input:function(e){e.target.composing||(t.contract_number=e.target.value)}}})])])])]),t._v(" "),n("div",{staticClass:"col"},[n("h5",{staticClass:"text-center"},[t._v("Nhà cung cấp")]),t._v(" "),n("div",{staticClass:"form-group"},[n("treeselect",{attrs:{"load-root-options":t.fetchProviders,placeholder:"Chọn nhà cung cấp"},model:{value:t.provider_id,callback:function(e){t.provider_id=e},expression:"provider_id"}})],1),t._v(" "),0===t.provider_id?n("div",[n("div",{staticClass:"form-group"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_provider.name,expression:"new_provider.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tên nhà cung cấp"},domProps:{value:t.new_provider.name},on:{input:function(e){e.target.composing||t.$set(t.new_provider,"name",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_provider.tax_number,expression:"new_provider.tax_number"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Mã số thuế"},domProps:{value:t.new_provider.tax_number},on:{input:function(e){e.target.composing||t.$set(t.new_provider,"tax_number",e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_provider.description,expression:"new_provider.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Mô tả"},domProps:{value:t.new_provider.description},on:{input:function(e){e.target.composing||t.$set(t.new_provider,"description",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_provider.address,expression:"new_provider.address"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Địa chỉ"},domProps:{value:t.new_provider.address},on:{input:function(e){e.target.composing||t.$set(t.new_provider,"address",e.target.value)}}})])])])]):t._e()])]),t._v(" "),n("hr"),t._v(" "),n("h5",[t._v("Danh sách vật tư")]),t._v(" "),n("div",{staticClass:"form-group"},[n("treeselect",{attrs:{multiple:!0,options:t.work.nested_categories,"open-on-focus":!0,"close-on-select":!1,disableBranchNodes:!0,placeholder:"Chọn vật tư theo danh sách"},model:{value:t.selected_materials,callback:function(e){t.selected_materials=e},expression:"selected_materials"}})],1),t._v(" "),n("div",{staticClass:"form-group"},[n("table",{staticClass:"table boq-table"},[n("thead",{staticClass:"thead-light text-center"},[n("tr",[n("th",{staticClass:"controls-col text-center",attrs:{rowspan:"2"}}),t._v(" "),n("th",{staticClass:"text-left name-col",attrs:{rowspan:"2"}},[t._v("Tên vật tư / Danh mục")]),t._v(" "),n("th",{staticClass:"per-col",attrs:{rowspan:"2"}},[t._v("Đơn vị tính")]),t._v(" "),n("th",{staticClass:"currency-col",attrs:{rowspan:"2"}},[t._v("Loại tiền")]),t._v(" "),n("th",{staticClass:"brand-col",attrs:{rowspan:"2"}},[t._v("Hãng")]),t._v(" "),n("th",{staticClass:"invoice-col",attrs:{colspan:"3"}},["invoice"===t.invoice_type?n("span",[t._v("Đơn hàng")]):n("span",[t._v("Hợp đồng")])]),t._v(" "),n("th",{staticClass:"boq-col",attrs:{colspan:"2"}},[t._v("BOQ")]),t._v(" "),n("th",{staticClass:"notes-col",attrs:{rowspan:"2"}},[t._v("Ghi chú")])]),t._v(" "),t._m(0,!1,!1)]),t._v(" "),n("tbody",[t._l(t.list,function(e){return n("tr",{key:e.uid,class:{"category-row":"category"===e.type,"material-row":"material"===e.type}},["category"===e.type?[n("td",{staticClass:"controls-col",on:{click:function(n){if(n.target!==n.currentTarget)return null;t.addMaterialTo(e.id,e.keyid)}}},[t._v("+")]),t._v(" "),n("td",{attrs:{colspan:"9"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"row.name"}],staticClass:"inline-td",attrs:{type:"text"},domProps:{value:e.name},on:{focus:function(t){t.target.select()},keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.addMaterial(e.keyid)},input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})])]:[n("td",{staticClass:"controls-col"},[t._v("-")]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"row.name"}],staticClass:"inline-td",attrs:{type:"text"},domProps:{value:e.name},on:{focus:function(t){t.target.select()},keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.addMaterial(e.keyid)},input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.per,expression:"row.per"}],staticClass:"inline-td",attrs:{type:"text",disabled:!e.is_new},domProps:{value:e.per},on:{focus:function(t){t.target.select()},keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.addMaterial(e.keyid)},input:function(n){n.target.composing||t.$set(e,"per",n.target.value)}}})]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.currency,expression:"row.currency"}],staticClass:"inline-td",attrs:{type:"text",disabled:!e.is_new},domProps:{value:e.currency},on:{focus:function(t){t.target.select()},keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.addMaterial(e.keyid)},input:function(n){n.target.composing||t.$set(e,"currency",n.target.value)}}})]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.brand,expression:"row.brand"}],staticClass:"inline-td",attrs:{type:"text",disabled:!e.is_new},domProps:{value:e.brand},on:{focus:function(t){t.target.select()},keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.addMaterial(e.keyid)},input:function(n){n.target.composing||t.$set(e,"brand",n.target.value)}}})]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.unit,expression:"row.unit"}],staticClass:"inline-td",attrs:{type:"text"},domProps:{value:e.unit},on:{focus:function(t){t.target.select()},keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.addMaterial(e.keyid)},input:function(n){n.target.composing||t.$set(e,"unit",n.target.value)}}})]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"row.price"}],staticClass:"inline-td",attrs:{type:"text"},domProps:{value:e.price},on:{focus:function(t){t.target.select()},keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.addMaterial(e.keyid)},input:function(n){n.target.composing||t.$set(e,"price",n.target.value)}}})]),t._v(" "),n("td",[t._v(t._s(e.price*e.unit))]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.boq_unit,expression:"row.boq_unit"}],staticClass:"inline-td",attrs:{type:"text",disabled:!e.is_new},domProps:{value:e.boq_unit},on:{focus:function(t){t.target.select()},keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.addMaterial(e.keyid)},input:function(n){n.target.composing||t.$set(e,"boq_unit",n.target.value)}}})]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.boq_price,expression:"row.boq_price"}],staticClass:"inline-td",attrs:{type:"text",disabled:!e.is_new},domProps:{value:e.boq_price},on:{focus:function(t){t.target.select()},keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.addMaterial(e.keyid)},input:function(n){n.target.composing||t.$set(e,"boq_price",n.target.value)}}})]),t._v(" "),n("td")]],2)}),t._v(" "),n("tr",{staticClass:"add-more",on:{click:t.addCategory}},[n("td",{staticClass:"controls-col"},[t._v("+")]),t._v(" "),n("td",{attrs:{colspan:"9"}},[t._v("Thêm danh mục")])])],2)])]),t._v(" "),n("div",{staticClass:"form-group text-center"},[n("button",{staticClass:"btn btn-primary",on:{click:t.submit}},[t._v("Lưu")]),t._v(" "),n("button",{staticClass:"btn",on:{click:t.cancel}},[t._v("Bỏ qua")])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",{staticClass:"text-center boq-unit-col"},[t._v("Số lượng")]),t._v(" "),n("th",{staticClass:"text-center boq-price-col"},[t._v("Đơn giá")]),t._v(" "),n("th",{staticClass:"text-center boq-total-col"},[t._v("Thành tiền")]),t._v(" "),n("th",{staticClass:"text-center boq-unit-col"},[t._v("Số lượng")]),t._v(" "),n("th",{staticClass:"text-center boq-price-col"},[t._v("Đơn giá")])])}]}}});